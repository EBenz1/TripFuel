<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏£‡∏¥‡∏õ</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FIX: Load IBM Plex Sans Thai Font correctly -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå IBM Plex Sans Thai weights 300, 400, 600, 700 ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á -->
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Load html2canvas library for capturing the image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- ====================================================================== -->
    <!-- [‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° 1]: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ FAVICON ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ SVG Data URL -->
    <!-- ‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î SVG ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÉ‡∏ô Header ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Favicon -->
    <!-- ‡πÇ‡∏Ñ‡πâ‡∏î SVG ‡∏ñ‡∏π‡∏Å‡∏¢‡πà‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏õ‡πá‡∏ô Data URI -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3Cfilter id='a' x='0' y='0' width='100%25' height='100%25'%3E%3CfeOffset result='offOut' in='SourceGraphic' dx='0' dy='0'%3E%3C/feOffset%3E%3CfeGaussianBlur result='blurOut' in='offOut' stdDeviation='1'%3E%3C/feGaussianBlur%3E%3CfeBlend in='SourceGraphic' in2='blurOut' mode='normal'%3E%3C/feBlend%3E%3C/filter%3E%3C/defs%3E%3Cg filter='url(%23a)'%3E%3Cpath fill='%231E293B' d='M0 0h100v100H0z'%3E%3C/path%3E%3Cpath fill='%233B82F6' d='M40 75h20v10H40z'%3E%3C/path%3E%3Cpath fill='%2394A3B8' d='M30 35h40v30H30z'%3E%3C/path%3E%3Cpath fill='%23FBBF24' d='M50 30L65 55H35z'%3E%3C/path%3E%3Cpath fill='%23DC2626' d='M45 50L55 50L50 60z'%3E%3C/path%3E%3Cpath fill='%23FBBF24' d='M65 55L75 65L65 75z'%3E%3C/path%3E%3Cpath fill='%233B82F6' d='M40 75L50 85L60 75z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E">
    <!-- ====================================================================== -->

    <style>
        /* FIX: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô IBM Plex Sans Thai ‡πÄ‡∏õ‡πá‡∏ô‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Body */
        body {
            font-family: 'IBM Plex Sans Thai', sans-serif; 
            transition: background-color 0.3s;
        }
        /* ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô */
        .page {
            display: none;
        }
        /* ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
        .page.active {
            display: block;
        }
        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á input date/time ‡πÉ‡∏ô dark mode */
        input[type="datetime-local"]::-webkit-calendar-picker-indicator {
            /* ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á invert ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏µ Dark Mode ‡πÅ‡∏•‡πâ‡∏ß */
            filter: none; 
        }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Input Fields */
        .custom-input {
            transition: all 0.2s ease-in-out;
            border-radius: 8px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô */
            /* ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡∏≠‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
            border: 1px solid #475569; /* slate-600 */
        }
        .custom-input:focus {
            border-color: #3B82F6; /* blue-500 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏á‡πÄ‡∏á‡∏≤‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ Focus */
            background-color: #1E293B; /* slate-800 ‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ Focus */
        }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï */
        .action-button {
            transition: all 0.3s ease;
            font-weight: 600;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Export Template (‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å) */
        #export-template-container {
            /* ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÉ‡∏ä‡πâ absolute ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏ô ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏´‡πâ html2canvas ‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ */
            position: absolute;
            left: -9999px;
            top: -9999px;
            /* ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô */
            width: 650px; 
            /* ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏≤‡∏°‡πÇ‡∏ó‡∏ô‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å */
            background-color: #0F172A; /* slate-900 */
            padding: 0;
            margin: 0;
        }
    </style>
</head>
<!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-900 ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏•‡∏∞ text-slate-200 ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏´‡∏•‡∏±‡∏Å -->
<body class="bg-slate-900 text-slate-200"> 

    <div class="container mx-auto max-w-5xl p-4">
        
        <!-- Header & Navigation -->
        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-800 ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á, border-t-4 ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô -->
        <header class="bg-slate-800 rounded-xl shadow-2xl p-6 mb-8 border-t-4 border-blue-500"> 
            
            <!-- ====================================================================== -->
            <!-- [‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° 2]: ‡πÇ‡∏•‡πÇ‡∏Å‡πâ SVG ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏≠‡∏õ -->
            <div class="flex items-center space-x-3 mb-2">
                <!-- Inline SVG Logo: ‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô ‡∏£‡∏ñ/‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢/‡∏™‡∏°‡∏∏‡∏î‡πÇ‡∏ô‡πâ‡∏ï/‡∏Å‡∏£‡∏≤‡∏ü (‡πÇ‡∏ó‡∏ô‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô/‡πÄ‡∏ó‡∏≤/‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á/‡πÅ‡∏î‡∏á) -->
                <svg width="48" height="48" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏™/Dark Mode -->
                    <!-- ‡∏Å‡∏£‡∏≤‡∏ü/‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô) -->
                    <path d="M15 85 L35 65 L60 85 L90 50" stroke="#3B82F6" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
                    <!-- ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå (‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°) -->
                    <path d="M20 75 L30 75 L35 70 L70 70 L75 75 L80 75 C82.76 75 85 72.76 85 70 V65 C85 62.24 82.76 60 80 60 H25 C22.24 60 20 62.24 20 65 V75 Z" fill="#1E293B"/>
                    <!-- ‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á (‡πÄ‡∏ó‡∏≤‡∏≠‡πà‡∏≠‡∏ô) -->
                    <path d="M35 70 L40 65 H65 L70 70 Z" fill="#94A3B8"/>
                    <!-- ‡∏•‡πâ‡∏≠‡∏£‡∏ñ (‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏°) -->
                    <circle cx="30" cy="75" r="5" fill="#334155"/>
                    <circle cx="75" cy="75" r="5" fill="#334155"/>
                    <!-- ‡∏™‡∏°‡∏∏‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡πÄ‡∏ó‡∏≤‡∏≠‡πà‡∏≠‡∏ô) -->
                    <rect x="50" y="20" width="30" height="35" rx="4" fill="#E2E8F0"/>
                    <rect x="53" y="25" width="24" height="4" fill="#94A3B8"/>
                    <rect x="53" y="32" width="24" height="4" fill="#94A3B8"/>
                    <rect x="53" y="39" width="15" height="4" fill="#94A3B8"/>
                    <!-- ‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡πÅ‡∏î‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) -->
                    <path d="M40 70 L45 70 V60 H35 L40 65 Z" fill="#DC2626"/>
                    <path d="M45 60 L45 50 L55 50 V60 Z" fill="#FBBF24"/>
                    <!-- ‡∏´‡∏¢‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) -->
                    <circle cx="45" cy="65" r="3" fill="#FBBF24"/>
                    <!-- ‡∏î‡∏¥‡∏ô‡∏™‡∏≠ (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á/‡πÄ‡∏ó‡∏≤) -->
                    <rect x="30" y="25" width="25" height="8" rx="2" transform="rotate(-30 30 25)" fill="#FBBF24"/>
                    <path d="M35 25 L38 27 L35 29 Z" fill="#94A3B8" transform="rotate(-30 30 25)"/>

                </svg>
                
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô 400 ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î font -->
                <h1 class="text-4xl font-bold text-blue-400">FuelTrip Logger</h1>
            </div>
            <p class="text-slate-400 mt-1">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</p>
            <!-- ====================================================================== -->
            
            <nav class="mt-5">
                <ul class="flex space-x-6">
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô -->
                    <li><button data-page="summary" class="nav-link font-semibold text-blue-400 border-b-2 border-blue-400 pb-1 hover:text-blue-300">‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ</button></li>
                    <li><button data-page="add-trip" class="nav-link font-semibold text-slate-400 hover:text-blue-400">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏£‡∏¥‡∏õ</button></li>
                    <li><button data-page="all-trips" class="nav-link font-semibold text-slate-400 hover:text-blue-400">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏¥‡∏õ</button></li>
                </ul>
            </nav>
        </header>

        <main>

            <!-- Page 1: Summary -->
            <div id="page-summary" class="page active">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6"> 
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Highlight: ‡πÅ‡∏î‡∏á) -->
                    <div class="bg-slate-800 rounded-xl shadow-lg p-6 text-center border-b-4 border-red-600"> 
                        <h3 class="text-md font-medium text-red-300 mb-2">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                        <p id="summary-total-cost" class="text-4xl font-extrabold text-red-200 animate-pulse">‡∏ø0.00</p>
                    </div>
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏ß‡∏° (Highlight: ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) -->
                    <div class="bg-slate-800 rounded-xl shadow-lg p-6 text-center border-b-4 border-amber-600"> 
                        <h3 class="text-md font-medium text-amber-300 mb-2">‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏ß‡∏°</h3>
                        <p id="summary-total-km" class="text-4xl font-extrabold text-amber-200">0 ‡∏Å‡∏°.</p>
                    </div>
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Highlight: ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô/‡∏£‡∏≠‡∏á) -->
                    <div class="bg-slate-800 rounded-xl shadow-lg p-6 text-center border-b-4 border-blue-600"> 
                        <h3 class="text-md font-medium text-blue-300 mb-2">‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                        <p id="summary-total-liters" class="text-4xl font-extrabold text-blue-200">0 ‡∏•‡∏¥‡∏ï‡∏£</p>
                    </div>
                </div>
            </div>

            <!-- Page 2: Add/Edit Trip -->
            <div id="page-add-trip" class="page">
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-800 ‡πÅ‡∏•‡∏∞ border-slate-700 -->
                <div class="bg-slate-800 rounded-xl shadow-2xl p-8 border border-slate-700"> 
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô -->
                    <h2 id="form-title" class="text-3xl font-bold mb-6 text-blue-300">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà</h2>
                    
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ô JS ‡∏î‡πâ‡∏ß‡∏¢) -->
                    <div id="message-box" class="hidden p-4 rounded-lg mb-6 text-center font-medium"></div>

                    <form id="add-trip-form" class="space-y-6">
                        
                        <!-- Group 1: Trip Identification -->
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á slate-700 ‡πÅ‡∏•‡∏∞ border-slate-600 -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-700 p-5 rounded-lg border border-slate-600">
                            <div class="md:col-span-1">
                                <label for="trip-name" class="block text-sm font-medium text-slate-300 mb-1">1. ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏¥‡∏õ <span class="text-red-400">*</span></label>
                                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á slate-800 ‡πÅ‡∏•‡∏∞ text-slate-100 -->
                                <input type="text" id="trip-name" required class="custom-input mt-1 block w-full bg-slate-800 border-slate-600 text-slate-100 shadow-lg p-3">
                            </div>
                            <div class="md:col-span-1">
                                <label for="trip-date" class="block text-sm font-medium text-slate-300 mb-1">2. ‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á <span class="text-red-400">*</span></label>
                                <input type="datetime-local" id="trip-date" required class="custom-input mt-1 block w-full bg-slate-800 border-slate-600 text-slate-100 shadow-lg p-3" style="color-scheme: dark;">
                            </div>
                            <div class="md:col-span-1">
                                <label for="pump-name" class="block text-sm font-medium text-slate-300 mb-1">3. ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡πä‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏¥‡∏° (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                                <input type="text" id="pump-name" placeholder="‡πÄ‡∏ä‡πà‡∏ô PTT, ‡∏ö‡∏≤‡∏á‡∏à‡∏≤‡∏Å" class="custom-input mt-1 block w-full bg-slate-800 border-slate-600 text-slate-100 shadow-lg p-3">
                            </div>
                        </div>

                        <!-- Group 2: Fuel Status and Cost -->
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á slate-700 ‡πÅ‡∏•‡∏∞ border-slate-600 -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 bg-slate-700 p-5 rounded-lg border border-slate-600">
                            <div class="space-y-1">
                                <label for="start-liters" class="block text-sm font-medium text-slate-300">4. ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏•‡∏¥‡∏ï‡∏£) <span class="text-red-400">*</span></label>
                                <input type="number" id="start-liters" min="0" step="0.01" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 50.00" class="custom-input mt-1 block w-full bg-slate-800 border-slate-600 text-slate-100 shadow-lg p-3">
                            </div>
                            <div class="space-y-1">
                                <label for="end-liters" class="block text-sm font-medium text-slate-300">5. ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (‡∏•‡∏¥‡∏ï‡∏£) <span class="text-red-400">*</span></label>
                                <input type="number" id="end-liters" min="0" step="0.01" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 35.50" class="custom-input mt-1 block w-full bg-slate-800 border-slate-600 text-slate-100 shadow-lg p-3">
                            </div>
                            <div class="space-y-1">
                                <label for="price-per-liter" class="block text-sm font-medium text-slate-300">6. ‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏•‡∏¥‡∏ï‡∏£ (‡∏ö‡∏≤‡∏ó) <span class="text-red-400">*</span></label>
                                <input type="number" id="price-per-liter" min="0" step="0.01" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 38.50" class="custom-input mt-1 block w-full bg-slate-800 border-slate-600 text-slate-100 shadow-lg p-3">
                            </div>
                        </div>

                        <!-- Group 3: Trip Distance -->
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á slate-700 ‡πÅ‡∏•‡∏∞ border-slate-600 -->
                        <div class="bg-slate-700 p-5 rounded-lg border border-slate-600">
                            <label for="trip-km" class="block text-sm font-medium text-slate-300 mb-1">7. ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏£‡∏¥‡∏õ (‡∏Å‡∏°.) <span class="text-red-400">*</span></label>
                            <input type="number" id="trip-km" min="0" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 450" class="custom-input mt-1 block w-full bg-slate-800 border-slate-600 text-slate-100 shadow-lg p-3">
                        </div>
                        
                        <!-- Submit Button -->
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô 600 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
                        <button type="submit" id="form-submit-btn" class="action-button w-full bg-blue-600 text-white py-3 px-4 shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏£‡∏¥‡∏õ
                        </button>
                    </form>
                </div>
            </div>

            <!-- Page 3: All Trips -->
            <div id="page-all-trips" class="page">
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-800 ‡πÅ‡∏•‡∏∞ border-slate-700 -->
                <div class="bg-slate-800 rounded-xl shadow-2xl p-6 border border-slate-700"> 
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô -->
                    <h2 class="text-3xl font-bold mb-6 text-blue-300">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                    
                    <div class="overflow-x-auto rounded-lg">
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-700 ‡πÅ‡∏•‡∏∞ slate-800 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
                        <table class="min-w-full divide-y divide-slate-700"> 
                            <thead class="bg-slate-700"> 
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏¥‡∏õ</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider">‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏Å‡∏°.)</th>
                                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
                                    <th class="px-6 py-3 text-left text-xs font-medium text-red-400 uppercase tracking-wider">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</th>
                                    <th class="px-6 py-3 text-center text-xs font-medium text-slate-400 uppercase tracking-wider">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="trips-list" class="bg-slate-800 divide-y divide-slate-700"> 
                                <!-- Trip rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Modal for Trip Details -->
    <div id="detail-modal" class="hidden fixed inset-0 bg-slate-900 bg-opacity-80 z-50 flex items-center justify-center p-4">
        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-800 ‡πÅ‡∏•‡∏∞ border-blue-600 -->
        <div class="bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 border border-blue-600 transform transition-all duration-300 scale-95 opacity-0" id="modal-content-area">
            <div class="flex justify-between items-start mb-4 border-b border-slate-700 pb-3">
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô -->
                <h3 class="text-2xl font-bold text-blue-400">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏£‡∏¥‡∏õ</h3>
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ hover -->
                <button id="close-modal-btn" class="text-slate-400 hover:text-red-400 text-3xl leading-none transition duration-150">&times;</button>
            </div>
            
            <!-- ‡∏õ‡∏£‡∏±‡∏ö: text-slate-300 -->
            <div id="detail-content" class="space-y-4 text-slate-300 text-lg">
                <!-- Details will be loaded here -->
            </div>

            <div class="mt-6 pt-4 border-t border-slate-700 grid grid-cols-3 gap-3">
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Export -->
                <button id="export-trip-btn" class="action-button col-span-2 bg-green-600 text-white py-2 hover:bg-green-700 text-sm">
                    üì∏ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå JPEG
                </button>
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
                <button id="edit-trip-btn" class="action-button bg-amber-600 text-white py-2 hover:bg-amber-700 text-sm">
                    ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                </button>
                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö -->
                <button id="delete-trip-btn" class="action-button bg-red-600 text-white py-2 hover:bg-red-700 text-sm col-span-3">
                    üóëÔ∏è ‡∏•‡∏ö‡∏ó‡∏£‡∏¥‡∏õ‡∏ô‡∏µ‡πâ
                </button>
            </div>
        </div>
    </div>
    
    <!-- Hidden Container: ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û JPEG (‡πÉ‡∏ä‡πâ‡∏™‡πÑ‡∏ï‡∏•‡πå Dark Mode) -->
    <div id="export-template-container" class="font-sans">
        <div class="export-container" id="export-card-content">
            <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ capture -->
        </div>
    </div>

    <script>
        // Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô localStorage
        const STORAGE_KEY = 'fuelTrips';

        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
        let currentEditingTripId = null;

        // Element ‡∏ï‡πà‡∏≤‡∏á‡πÜ
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-link');
        const addTripForm = document.getElementById('add-trip-form');
        const formTitle = document.getElementById('form-title');
        const formSubmitBtn = document.getElementById('form-submit-btn');
        const tripNameInput = document.getElementById('trip-name');
        const tripDateInput = document.getElementById('trip-date'); 
        const pumpNameInput = document.getElementById('pump-name'); // New Input
        const tripKmInput = document.getElementById('trip-km');
        const startLitersInput = document.getElementById('start-liters');
        const endLitersInput = document.getElementById('end-liters');
        const pricePerLiterInput = document.getElementById('price-per-liter');
        const messageBox = document.getElementById('message-box');
        const tripsListBody = document.getElementById('trips-list');
        const summaryTotalCost = document.getElementById('summary-total-cost');
        const summaryTotalKm = document.getElementById('summary-total-km');
        const summaryTotalLiters = document.getElementById('summary-total-liters');

        // Elements Modal
        const detailModal = document.getElementById('detail-modal');
        const modalContentArea = document.getElementById('modal-content-area');
        const detailContent = document.getElementById('detail-content');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const editTripBtn = document.getElementById('edit-trip-btn');
        const deleteTripBtn = document.getElementById('delete-trip-btn');
        const exportTripBtn = document.getElementById('export-trip-btn');
        
        // Element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Export Image
        const exportCardContent = document.getElementById('export-card-content');


        /**
         * Function: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏ï‡∏£‡∏¥‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà input type="datetime-local" ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (YYYY-MM-DDThh:mm)
         */
        function getCurrentDateTimeLocal() {
            const now = new Date();
            // Offset ‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô
            const offset = now.getTimezoneOffset() * 60000;
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á Date object ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô‡πÅ‡∏•‡πâ‡∏ß
            const localDate = new Date(now.getTime() - offset);
            // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô ISO String ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà YYYY-MM-DDThh:mm
            return localDate.toISOString().slice(0, 16);
        }

        // Function: ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ (Page) ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
        function showPage(pageId) {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á ID ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏° 'page-'
            const targetPageId = 'page-' + pageId;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
            const targetPage = document.getElementById(targetPageId);
            
            if (targetPage) {
                targetPage.classList.add('active');
            } else {
                console.error("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á:", targetPageId);
            }

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á Nav Links
            navLinks.forEach(link => {
                const isCurrentPage = link.getAttribute('data-page') === pageId;
                // ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô
                link.classList.toggle('text-blue-400', isCurrentPage);
                link.classList.toggle('border-b-2', isCurrentPage);
                link.classList.toggle('border-blue-400', isCurrentPage);
                link.classList.toggle('text-slate-400', !isCurrentPage);
                link.classList.toggle('hover:text-blue-400', !isCurrentPage);
            });
        }

        // Function: ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡∏à‡∏≤‡∏Å localStorage
        function getTrips() {
            const trips = localStorage.getItem(STORAGE_KEY);
            return trips ? JSON.parse(trips) : [];
        }

        // Function: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡πÑ‡∏õ localStorage
        function saveTrips(trips) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(trips));
        }

        // Function: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (‡πÅ‡∏ó‡∏ô alert)
        function showMessage(message, type = 'success') {
            messageBox.textContent = message;
            messageBox.classList.remove('hidden');
            // ‡∏•‡∏ö‡∏™‡∏µ‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô
            messageBox.classList.remove('bg-green-800', 'text-green-100', 'bg-red-800', 'text-red-100');
            
            if (type === 'success') {
                // Dark Mode: ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)
                messageBox.classList.add('bg-emerald-800', 'text-emerald-100');
            } else {
                // Dark Mode: ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (‡πÅ‡∏î‡∏á)
                messageBox.classList.add('bg-red-800', 'text-red-100');
            }
        }

        // Function: ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        function hideMessage() {
            messageBox.classList.add('hidden');
        }

        // Function: ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏´‡∏ô‡πâ‡∏≤ 3)
        function renderAllTrips() {
            const trips = getTrips();
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤
            trips.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            tripsListBody.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤

            if (trips.length === 0) {
                // ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-500
                tripsListBody.innerHTML = '<tr><td colspan="5" class="px-6 py-4 text-center text-slate-500">‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</td></tr>';
                return;
            }

            trips.forEach(trip => {
                // ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà pumpName ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ field ‡∏ô‡∏µ‡πâ)
                const pumpInfo = trip.pumpName ? `(${trip.pumpName})` : '';

                const litersUsed = trip.startLiters - trip.endLiters;
                const totalCost = litersUsed * trip.pricePerLiter;

                // ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
                const tripDate = new Date(trip.date);
                const formattedDate = tripDate.toLocaleDateString('th-TH', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                const row = document.createElement('tr');
                // ‡∏õ‡∏£‡∏±‡∏ö: hover:bg-slate-700
                row.className = 'hover:bg-slate-700 transition duration-150';
                row.innerHTML = `
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: text-slate-100, text-slate-500 -->
                    <td class="px-6 py-4 whitespace-nowrap text-slate-100 font-medium">${trip.name} <span class="text-xs text-slate-500">${pumpInfo}</span></td>
                    <td class="px-6 py-4 whitespace-nowrap text-slate-300 text-sm">${formattedDate}</td>
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: text-amber-400 (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á -->
                    <td class="px-6 py-4 whitespace-nowrap text-amber-400 font-semibold">${trip.km.toFixed(0)}</td>
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: text-red-400 (‡πÅ‡∏î‡∏á) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
                    <td class="px-6 py-4 whitespace-nowrap font-semibold text-red-400">‡∏ø${totalCost.toFixed(2)}</td>
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: bg-blue-600 (‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
                    <td class="px-6 py-4 whitespace-nowrap text-center">
                        <button onclick="viewDetails(${trip.id})" class="bg-blue-600 text-white px-3 py-1 text-xs rounded-full hover:bg-blue-700 transition duration-150 shadow-md">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
                    </td>
                `;
                tripsListBody.appendChild(row);
            });
        }

        // Function: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏£‡∏∏‡∏õ (‡∏´‡∏ô‡πâ‡∏≤ 1)
        function renderSummary() {
            const trips = getTrips();
            
            let totalCost = 0;
            let totalKm = 0;
            let totalLitersUsed = 0;

            trips.forEach(trip => {
                const litersUsed = trip.startLiters - trip.endLiters;
                totalCost += litersUsed * trip.pricePerLiter;
                totalKm += trip.km;
                totalLitersUsed += litersUsed;
            });

            summaryTotalCost.textContent = `‡∏ø${totalCost.toFixed(2)}`;
            summaryTotalKm.textContent = `${totalKm.toFixed(2)} ‡∏Å‡∏°.`;
            summaryTotalLiters.textContent = `${totalLitersUsed.toFixed(2)} ‡∏•‡∏¥‡∏ï‡∏£`;
        }

        // Function: ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Modal ‡∏û‡∏£‡πâ‡∏≠‡∏° Transition
        function toggleModal(show) {
            if (show) {
                detailModal.classList.remove('hidden');
                setTimeout(() => {
                    modalContentArea.classList.remove('scale-95', 'opacity-0');
                    modalContentArea.classList.add('scale-100', 'opacity-100');
                }, 10);
            } else {
                modalContentArea.classList.remove('scale-100', 'opacity-100');
                modalContentArea.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    detailModal.classList.add('hidden');
                }, 300); // ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÉ‡∏´‡πâ Transition ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
            }
        }

        // Function: ‡πÅ‡∏™‡∏î‡∏á Modal ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏£‡∏¥‡∏õ
        window.viewDetails = function(id) {
            const trips = getTrips();
            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏£‡∏¥‡∏õ‡∏à‡∏≤‡∏Å ID
            const trip = trips.find(t => t.id === id);

            if (!trip) {
                showMessage('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£', 'error');
                return;
            }

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ
            const litersUsed = trip.startLiters - trip.endLiters;
            const totalCost = litersUsed * trip.pricePerLiter;
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏®‡∏π‡∏ô‡∏¢‡πå
            const fuelConsumption = litersUsed > 0 ? trip.km / litersUsed : 0; 
            
            // ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
            const tripDate = new Date(trip.date);
            const formattedDate = tripDate.toLocaleDateString('th-TH', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡πä‡∏° (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ)
            const pumpNameDisplay = trip.pumpName || '-';

            detailContent.innerHTML = `
                <div class="space-y-3">
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ -->
                    <p><strong class="text-blue-300">‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏¥‡∏õ:</strong> ${trip.name}</p>
                    <p><strong class="text-blue-300">‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡πä‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏¥‡∏°:</strong> ${pumpNameDisplay}</p> <!-- Display Pump Name -->
                    <p><strong class="text-blue-300">‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${formattedDate}</p>
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á -->
                    <p><strong class="text-blue-300">‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏ß‡∏°:</strong> <span class="text-amber-300 font-semibold">${trip.km.toFixed(0)}</span> ‡∏Å‡∏°.</p>
                    <p><strong class="text-blue-300">‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:</strong> ${trip.startLiters.toFixed(2)} ‡∏•‡∏¥‡∏ï‡∏£</p>
                    <p><strong class="text-blue-300">‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong> ${trip.endLiters.toFixed(2)} ‡∏•‡∏¥‡∏ï‡∏£</p>
                    <p><strong class="text-blue-300">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô/‡∏•‡∏¥‡∏ï‡∏£:</strong> ‡∏ø${trip.pricePerLiter.toFixed(2)}</p>
                </div>

                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ slate-700 ‡πÅ‡∏•‡∏∞ border-amber-500 (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á -->
                <div class="mt-4 p-4 bg-slate-700 rounded-lg border-l-4 border-amber-500">
                    <p class="font-bold text-lg text-amber-300">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á:</p>
                    <p class="text-xl font-bold">${fuelConsumption.toFixed(2)} ‡∏Å‡∏°./‡∏•‡∏¥‡∏ï‡∏£</p>
                </div>

                <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ bg-red-900 bg-opacity-30 ‡πÅ‡∏•‡∏∞ border-red-500 (‡πÅ‡∏î‡∏á) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
                <div class="p-4 bg-red-900 bg-opacity-30 rounded-lg border-l-4 border-red-500">
                    <p class="font-bold text-lg text-red-300">‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢:</p>
                    <p class="text-xl font-bold">${litersUsed.toFixed(2)} ‡∏•‡∏¥‡∏ï‡∏£</p>
                    <p class="text-3xl font-extrabold text-red-400 mt-1">‡∏ø${totalCost.toFixed(2)}</p>
                </div>
            `;

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô Modal ‡πÇ‡∏î‡∏¢‡∏™‡πà‡∏á ID ‡∏ó‡∏£‡∏¥‡∏õ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
            editTripBtn.onclick = () => startEdit(id);
            deleteTripBtn.onclick = () => deleteTrip(id);
            // ‡∏ú‡∏π‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô export ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°
            exportTripBtn.onclick = () => exportTripDetails(trip);

            toggleModal(true); // ‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Modal ‡πÉ‡∏´‡∏°‡πà
        }
        
        // Function: ‡∏ã‡πà‡∏≠‡∏ô Modal
        function hideDetails() {
            toggleModal(false);
        }

        // Function: ‡∏•‡∏ö‡∏ó‡∏£‡∏¥‡∏õ
        window.deleteTrip = function(id) {
            // ‡πÉ‡∏ä‡πâ custom modal ‡πÅ‡∏ó‡∏ô confirm()
            // ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á iFrame ‡∏à‡∏∞‡πÉ‡∏ä‡πâ window.confirm() ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á modal UI ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
            if (window.confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ó‡∏£‡∏¥‡∏õ‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ")) {
                const trips = getTrips();
                // ‡πÉ‡∏ä‡πâ filter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Array ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ ID ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô
                const updatedTrips = trips.filter(t => t.id !== id);
                saveTrips(updatedTrips);

                showMessage('‡∏•‡∏ö‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!', 'success');
                hideDetails(); // ‡∏õ‡∏¥‡∏î Modal
                updateAllData(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
            }
        }
        
        // Function: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ô‡∏≥‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)
        window.startEdit = function(id) {
            const trips = getTrips();
            const trip = trips.find(t => t.id === id);

            if (!trip) {
                showMessage('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', 'error');
                return;
            }

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            currentEditingTripId = id;

            // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
            tripNameInput.value = trip.name;
            // ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô LocalStorage (‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô ISO String ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
            tripDateInput.value = trip.date.slice(0, 16); 
            // ‡πÄ‡∏ï‡∏¥‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡πä‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            pumpNameInput.value = trip.pumpName || ''; 
            
            tripKmInput.value = trip.km;
            startLitersInput.value = trip.startLiters;
            endLitersInput.value = trip.endLiters;
            pricePerLiterInput.value = trip.pricePerLiter;

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
            formTitle.textContent = '‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏£‡∏¥‡∏õ: ' + trip.name;
            formSubmitBtn.textContent = '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏£‡∏¥‡∏õ';
            // ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (amber) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            formSubmitBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
            formSubmitBtn.classList.add('bg-amber-600', 'hover:bg-amber-700');
            
            // ‡∏ô‡∏≥‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
            hideDetails();
            showPage('add-trip');
            hideMessage();
        }
        
        // Function: ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï UI ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏´‡∏°‡πà"
        function resetFormUI() {
            currentEditingTripId = null;
            formTitle.textContent = '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà';
            formSubmitBtn.textContent = '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏£‡∏¥‡∏õ';
            // ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô (blue) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏´‡∏°‡πà
            formSubmitBtn.classList.remove('bg-amber-600', 'hover:bg-amber-700');
            formSubmitBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
        }


        /**
         * Function: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå JPEG ‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏£‡∏¥‡∏õ
         * (‡πÉ‡∏ä‡πâ html2canvas ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á DOM ‡πÄ‡∏õ‡πá‡∏ô Canvas ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô JPEG)
         */
        window.exportTripDetails = async function(trip) {
            hideDetails();
            showMessage('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå JPEG...', 'success');

            const litersUsed = trip.startLiters - trip.endLiters;
            const totalCost = litersUsed * trip.pricePerLiter;
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏®‡∏π‡∏ô‡∏¢‡πå
            const fuelConsumption = litersUsed > 0 ? trip.km / litersUsed : 0; 
            
            const tripDate = new Date(trip.date);
            const formattedDate = tripDate.toLocaleDateString('th-TH', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡πä‡∏° (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ)
            const pumpNameDisplay = trip.pumpName ? trip.pumpName : '-';
            const pumpEmoji = trip.pumpName ? '‚õΩÔ∏è' : 'üìç';


            // 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û
            // ‡∏õ‡∏£‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ Tailwind classes/‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏≠‡∏¥‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ï‡∏≤‡∏°‡πÇ‡∏ó‡∏ô‡∏™‡∏µ‡πÉ‡∏´‡∏°‡πà
            exportCardContent.className = 'export-container p-8 text-slate-100'; 
            exportCardContent.style.backgroundColor = '#1E293B'; // slate-800
            exportCardContent.style.borderRadius = '16px';
            exportCardContent.style.boxShadow = '0 10px 20px rgba(0, 0, 0, 0.6)';
            exportCardContent.style.border = '2px solid #334155'; // slate-700

            // IMPORTANT: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î font-family ‡πÉ‡∏ô template ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö font ‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤
            exportCardContent.innerHTML = `
                <div style="font-family: 'IBM Plex Sans Thai', sans-serif;">
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å -->
                    <h1 style="font-size: 2.5em; color: #3B82F6; text-align: center; margin-bottom: 20px; border-bottom: 3px solid #3B82F6; padding-bottom: 10px; font-weight: 700;">
                        üöó ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô: ${trip.name}
                    </h1>
                    
                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á slate-900 -->
                    <div style="margin-top: 20px; padding: 15px; border-radius: 10px; background-color: #0F172A;">
                        
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: #94A3B8;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡πÄ‡∏ß‡∏•‡∏≤:</span>
                            <span style="font-weight: 600;">${formattedDate}</span>
                        </div>
                        
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏±‡πä‡∏° -->
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px solid #334155; padding-bottom: 8px;">
                            <span style="color: #94A3B8;">${pumpEmoji} ‡∏õ‡∏±‡πä‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏¥‡∏°:</span>
                            <span style="font-weight: 600; color: #F59E0B;">${pumpNameDisplay}</span>
                        </div>

                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á -->
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; margin-top: 15px;">
                            <span style="color: #94A3B8;">‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏ß‡∏°:</span>
                            <span style="font-weight: 600; color: #F59E0B;">${trip.km.toFixed(0)} ‡∏Å‡∏°.</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: #94A3B8;">‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô - ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
                            <span style="font-weight: 600;">${trip.startLiters.toFixed(2)} L - ${trip.endLiters.toFixed(2)} L</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: #94A3B8;">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô/‡∏•‡∏¥‡∏ï‡∏£:</span>
                            <span style="font-weight: 600;">‡∏ø${trip.pricePerLiter.toFixed(2)}</span>
                        </div>
                        
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á (‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ö‡∏ß‡∏Å) -->
                        <div style="display: flex; justify-content: space-between; margin-top: 20px; padding-top: 10px; border-top: 1px solid #334155;">
                            <span style="color: #10B981; font-weight: 700;">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á:</span>
                            <span style="color: #10B981; font-weight: 700; font-size: 1.2em;">${fuelConsumption.toFixed(2)} ‡∏Å‡∏°./‡∏•‡∏¥‡∏ï‡∏£</span>
                        </div>
                    </div>

                    <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
                    <div style="background-color: #1D4ED8; border-radius: 10px; padding: 25px; margin-top: 30px; text-align: center; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);">
                        <h2 style="font-size: 1.5em; color: #DBEAFE; margin-bottom: 10px; font-weight: 700;">üí∞ ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏á‡∏£‡∏ß‡∏°</h2>
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
                        <p style="color: #F87171; font-size: 3.5em; font-weight: 700; line-height: 1.2;">‡∏ø${totalCost.toFixed(2)}</p>
                        <!-- ‡∏õ‡∏£‡∏±‡∏ö: ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ -->
                        <p style="color: #FBBF24; font-size: 1.3em; font-weight: 600; margin-top: 5px;">(${litersUsed.toFixed(2)} ‡∏•‡∏¥‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ)</p>
                    </div>
                </div>
            `;
            
            // 2. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ html2canvas
            try {
                const canvas = await html2canvas(document.getElementById('export-card-content'), {
                    // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Retina Display ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏û‡∏Ñ‡∏°‡∏ä‡∏±‡∏î
                    scale: 2, 
                    // ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏û‡πÑ‡∏°‡πà‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™
                    backgroundColor: '#0F172A', 
                    useCORS: true 
                });

                // 3. ‡πÅ‡∏õ‡∏•‡∏á Canvas ‡πÄ‡∏õ‡πá‡∏ô Data URL ‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö JPEG (‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û 90%)
                const imageDataUrl = canvas.toDataURL('image/jpeg', 0.9);

                // 4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Link ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡πà‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
                const link = document.createElement('a');
                link.href = imageDataUrl;
                link.download = `FuelTrip_Report_${trip.name.replace(/\s/g, '_')}_${trip.id}.jpeg`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                showMessage('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ü‡∏•‡πå JPEG ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!', 'success');

            } catch (error) {
                console.error("Error generating image:", error);
                showMessage('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û', 'error');
            }
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
            setTimeout(hideMessage, 3000);
        }

        // Function: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£ Submit ‡∏ü‡∏≠‡∏£‡πå‡∏° (‡∏´‡∏ô‡πâ‡∏≤ 2)
        function handleFormSubmit(event) {
            event.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà
            hideMessage();

            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
            const name = tripNameInput.value;
            const date = tripDateInput.value;
            const pumpName = pumpNameInput.value.trim(); // New: Get Pump Name
            const km = parseFloat(tripKmInput.value);
            const startLiters = parseFloat(startLitersInput.value);
            const endLiters = parseFloat(endLitersInput.value);
            const pricePerLiter = parseFloat(pricePerLiterInput.value);

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö
            if (!name || !date || isNaN(km) || isNaN(startLiters) || isNaN(endLiters) || isNaN(pricePerLiter)) {
                showMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ *) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
                return;
            }

            if (endLiters > startLiters) {
                showMessage('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏¥‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏¥‡∏ï‡∏£‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô', 'error');
                return;
            }
            
            if (km <= 0) {
                 showMessage('‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡∏Å‡∏°.', 'error');
                return;
            }

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á Object ‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            const newTripData = {
                name,
                date,
                pumpName, // New Field
                km,
                startLiters,
                endLiters,
                pricePerLiter
            };

            const trips = getTrips();

            if (currentEditingTripId) {
                // ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                const tripIndex = trips.findIndex(t => t.id === currentEditingTripId);
                if (tripIndex !== -1) {
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏î‡∏¥‡∏°
                    trips[tripIndex] = { ...trips[tripIndex], ...newTripData };
                    saveTrips(trips);
                    showMessage('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!', 'success');
                }
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï UI ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                resetFormUI();
                
            } else {
                // ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
                const newTrip = {
                    id: Date.now(), // ‡πÉ‡∏ä‡πâ timestamp ‡πÄ‡∏õ‡πá‡∏ô ID ‡∏á‡πà‡∏≤‡∏¢‡πÜ
                    ...newTripData
                };
                trips.push(newTrip);
                saveTrips(trips);
                showMessage('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!', 'success');
            }

            addTripForm.reset(); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏°
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤ ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            tripDateInput.value = getCurrentDateTimeLocal(); 
            
            updateAllData(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô

            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ 'All Trips' ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
            setTimeout(() => {
                showPage('all-trips');
                hideMessage();
            }, 1500); // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        }

        // Function: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤
        function updateAllData() {
            renderAllTrips();
            renderSummary();
        }

        // --- Event Listeners ---

        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        document.addEventListener('DOMContentLoaded', () => {
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Event Listener ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Nav Links
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const pageId = link.getAttribute('data-page');
                    showPage(pageId);
                });
            });

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Event Listener ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°
            addTripForm.addEventListener('submit', handleFormSubmit);

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î Modal
            closeModalBtn.addEventListener('click', hideDetails);
            detailModal.addEventListener('click', (e) => {
                if (e.target === detailModal) {
                    hideDetails();
                }
            });

            // *** ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ***
            tripDateInput.value = getCurrentDateTimeLocal();

            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
            updateAllData();
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Summary)
            showPage('summary');
        });

    </script>
</body>
</html>
